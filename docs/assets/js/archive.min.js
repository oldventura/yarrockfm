var currentPage=null;const fm=new YarRockFM;function startup(){var e=window.location.search;if(e){var a=new URLSearchParams(e);if(currentPage=parseInt(a.get("page")))return $("#nextPage").before(`<li class="page-item"><a class="page-link" href="archive.html?page=${currentPage}">${currentPage}</a></li>`),void load_page(currentPage);window.location="archive.html?page=1"}else get_pages()}async function get_pages(){await fm.get_tree();var e=await fm.get_news_pages();$("#nextPage").before(`<li class="page-item"><a class="page-link" href="archive.html?page=${e.length}">${e.length}</a></li>`),load_page(currentPage=e.length)}async function load_page(e){(await fm.get_playlist(e)).playlists.forEach((function(e){$("#playlists").prepend(`<tr playlist_id="${e.id}" onclick="openPlaylist(this);"><td>${e.name}</td><td>${e.type}</td><td>${e.date}</td></tr>`)}))}async function openPlaylist(e){let a=$(e).attr("playlist_id");var t=await fm.get_songs(a),n="https://www.youtube.com/watch_videos?video_ids=";t.split("\n").forEach((function(e){n=n.concat(e.split(" ")[0].slice(34)+",")})),window.open(n,"_blank")}function getPreviousPage(){window.location="archive.html?page="+(currentPage-1)}function getNextPage(){window.location=`archive.html?page=${currentPage+1}`}startup();